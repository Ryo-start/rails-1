<%= render "shared/partial" %>

<div class="container my-5">
  <h3 class="display-6">予定一覧</h3>

  <div class="text-end mb-3">
  <%= link_to "予定の新規追加", new_task_path, class: "btn btn-primary" %>
  </div>

  <!-- テーブル -->
  <table class="table table-bordered table-striped table-hover">
    <thead>
      <tr>
        <th class="align-middle">ID</th>
        <th class="align-middle">タイトル</th>
        <th class="align-middle">開始日</th>
        <th class="align-middle">終了日</th>
        <th class="align-middle">終日</th>
        <th class="align-middle">更新日時</th>
        <th class="align-middle"></th>
        <th class="align-middle"></th>
        <th class="align-middle"></th>
      </tr>
    </thead>
    <tbody>
      <% @tasks.each do |task| %>
        <tr>
          <td class="align-middle"><%= task.id %></td>
          <td class="align-middle"><%= task.title %></td>
          <td class="align-middle"><%= task.start_date&.strftime("%Y/%m/%d") %></td>
          <td class="align-middle"><%= task.end_date&.strftime("%Y/%m/%d") %></td>
          <td class="align-middle"><%= task.is_all_day ? "○" : "" %></td>
          <td class="align-middle"><%= task.updated_at.strftime("%Y/%m/%d %H:%M") %></td>
          <td class="align-middle">
            <%= link_to "詳細", task, class: "btn btn-info btn-sm" %>
          </td>
          <td class="align-middle">
            <%= link_to "編集", edit_task_path(task), class: "btn btn-warning btn-sm" %>
          </td>
          <td class="align-middle">
            <%= link_to "削除", task, method: :delete, data: { confirm: "予定を削除しますか？" }, class: "btn btn-danger btn-sm" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- 予定の合計数 -->
  <p>予定の合計数: <%= Task.count %></p>

  <!-- 本日の日付 -->
  <p>本日の日付: <%= Date.today.strftime("%Y/%m/%d") %></p>

</div>